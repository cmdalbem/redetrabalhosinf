<h1>Projetos</h1>

<!--
<table class="table table-striped table-hover">
  <tr>
    <th>Title</th>
    <th>Course</th>
  </tr>
  
  <% @person.projects.all.sort! {|x,y| x.course.name <=> y.course.name } %>
  <% @person.projects.each do |project| %>
    <tr>
      <td><%= project.title %></td>
      <td><%= project.course.name %></td>
    </tr>
  <% end %>
</table>
!-->

<div class="accordion" id="accordion">
  
  <div class="accordion-group">
    <% collapseId = 0 %>
    <% @person.projects.each do |project| %>

      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse<%=collapseId%>">
          Título: <%= project.title %> 
        </a>

        <p>Likes: 
          <span id="project-like-count-<%= project.id %>"><%= project.likes.count %></span>
        </p>

        <% if user_signed_in? %>
          <%= link_to 'Like', like_project_path(project), remote: true, class: "btn btn-mini" %>
        <% end %>
      </div>
      <div id="collapse<%=collapseId%>" class="accordion-body collapse">
        <div class="accordion-inner">
          <p>
            <b>Disciplina:</b>
            <%= project.course.name %>
          </p>
          <p>
            <b>Descrição:</b>
            <%= project.description %>
          </p>
          <p>
            <b>Semestre:</b>
            <%= project.barra %>
          </p>
        </div>
      </div>

      <% collapseId+=1 %>
    <% end %>

  </div>

</div>